---
title             : "Residential Instability and Childhood Wellbeing"
shorttitle        : "Residential Stability"

author: 
  - name          : "Libby Kramer"
    affiliation   : "1"
    corresponding : yes    # Define only one corresponding author
    address       : "Elliott Halll 75 E River Parkway, Minneapolis MN"
    email         : "krame937@umn.edu"
    role: # Contributorship roles (e.g., CRediT, https://credit.niso.org/)
      - "Conceptualization"
      - "Writing - Original Draft Preparation"
      - "Writing - Review & Editing"

affiliation:
  - id            : "1"
    institution   : "University of Minnesota"

authornote: |
  Add complete departmental affiliations for each author here. Each new line herein must be indented, like this line.

  Thank you!

abstract: |
  *500 words*
  The current research suggestes that the quality of housing is a social determinant of health, and residential stability is a factor for older adults's health (CITE). This report will look more specifically at the relationship between residential stability and childhood well-being, asking what impact residential stability has on wellbeing? This research can guide how we approach housing, espeically for parents. As housing is not gaurenteed in the United States evidence on the impacts of this can be apart of ensuring children all have a stable place to live. 
  
  In this study we found that...

  
keywords          : "housing, residential stability, childhood wellbeing, health, social determinants of health"
wordcount         : "X"

bibliography      : "r-references.bib"

floatsintext      : yes
linenumbers       : no
draft             : no
mask              : no

figurelist        : no
tablelist         : no
footnotelist      : no

classoption       : "man"
output            : papaja::apa6_pdf
---

```{r setup, include = FALSE}
library("papaja")
library("groundhog")
library("dplyr")
library("psych")
library("labelled")
library("ggplot2")
library("data.table")
library("dplyr")
library("bit64")
install.packages("tidyverse")
library("tidyverse")
r_refs("r-references.bib")
```

```{r analysis-preferences}
# Seed for random number generation
set.seed(0628)
knitr::opts_chunk$set(cache.extra = knitr::rand_seed)
```

```{r data setup, include = FALSE}

# read in simulated data
dat_sim <- read.csv("residential_stability_simulated_data_2025_11-17.csv")
dat_sim

# creating objects to be inserted into the report 
# assigning variables new names
cwb_1_sim <- (dat_sim$cwb_1_sim)

# re-code cwb_2 to be keyed negatively
cwb_2_sim <- (dat_sim$cwb_2_sim)
recode(dat_sim$cwb_2_sim, '1'= 2, '2' = 1)
cwb_2_sim_r <- recode(dat_sim$cwb_2_sim, '1'= 2, '2' = 1)
cwb_2_sim_r
# add recoded to dat_sim
dat_sim$cwb_2_sim_r <- c(cwb_2_sim_r)


# checks that cwb_2 was reverse coded correctly
table(cwb_2_sim_r)
table(cwb_2_sim)

# re-code cwb_3 to be keyed negatively
cwb_3_sim <- (dat_sim$cwb_3_sim)
recode(dat_sim$cwb_3_sim, '1' = 2, '2' = 1)
cwb_3_sim_r <- recode(dat_sim$cwb_3_sim, '1' = 2, '2' = 1)
cwb_3_sim_r
dat_sim$cwb_3_sim_r <- c(cwb_3_sim_r)

# check that cwb_3 was reverse coded correctly 
table(cwb_3_sim)
table(cwb_3_sim_r)

cwb_4_sim <- (dat_sim$cwb_4_sim)
cwb_4_sim

# mean scores for cwb items
cwb_1_mean <- mean(dat_sim$cwb_1_sim, na.rm = TRUE)
cwb_2_r_mean <- mean(cwb_2_sim_r, na.rm = TRUE)
cwb_3_r_mean <- mean(cwb_3_sim_r, na.rm = TRUE)
cwb_4_mean <- mean(dat_sim$cwb_4_sim, na.rm = TRUE)

# standard deviation for cwb items
cwb_1_sd <- sd(dat_sim$cwb_1_sim, na.rm = TRUE)
cwb_2_r_sd <- sd(cwb_2_sim_r, na.rm = TRUE)
cwb_3_r_sd <- sd(cwb_3_sim_r, na.rm = TRUE)
cwb_4_sd <- sd(dat_sim$cwb_4_sim, na.rm = TRUE)


# create new row of the cwb scale based on the mean scores of all of the cwb variables
simulated <- dat_sim %>% dplyr::mutate(cwb_scale = rowMeans(pick(cwb_1_sim, cwb_2_sim, cwb_3_sim, cwb_4_sim)))

mean(simulated$cwb_scale, na.rm = TRUE)

### adding cwb_scale to the simulated
dat_sim$cwb_scale_sim <- c(simulated$cwb_scale)

cwb_scale_mean <- mean(simulated$cwb_scale, na.rm = TRUE)
cwb_scale_mean
cwb_scale_sd <- sd(simulated$cwb_scale, na.rm = TRUE)
cwb_scale_sd

# assigning variable names for residential stability
res_1_sim <- (dat_sim$res_1_sim)
res_1_sim
table(res_1_sim)
res_1_sim_mean <- mean(dat_sim$res_1_sim)

res_2_sim <- (dat_sim$res_2_sim)
res_2_sim
table(res_2_sim)

# assigning variable names for demographic data
dem_1_sim <- (dat_sim$dem_1_sim)
dem_2_sim <- (dat_sim$dem_2_sim)
dem_3_sim <- (dat_sim$dem_3_sim)
```

## Present Study
  The purpose of the present study is to better understand what is affecting childhood well-being and if frequent moving is contributing to their well-being. 

# Method
The current study was not preregistered. Data and code are available on Github [*click here* ](https://github.com/libby-kramer/Residential_Instability_Project)
Data retrieved from the 2024 Survey of Income and Program Participation <https://www.census.gov/programs-surveys/sipp/data/datasets/2024-data/2024.html>

## Participants and Procedure
```{r demographics, include = FALSE}
# average age of respondents 
dem_1_mean <- mean(dat_sim$dem_1_sim, na.rm = TRUE)
dem_1_mean
summary(dem_1_sim)

# standard deviation of age
dem_1_sd <- sd(dat_sim$dem_1_sim, na.rm = TRUE)
dem_1_sd
```

```{r demographic tables, include = FALSE}
summary(dat_sim$dem_2_sim)

race_percent <- results_dplyr <- dat_sim %>% 
  group_by(dem_2_sim) %>% 
  summarise(Percentage = n()/nrow(dat_sim)*100)
  

sex_percent <- results_dpylr <- dat_sim %>% 
  group_by(dem_3_sim) %>%  
  summarise(Percentage = n()/nrow(dat_sim)*100)
```

```{r tables, echo=FALSE}
apa_table(results_dplyr)
apa_table(sex_percent)
```
The sample size after omitting the missing values, due to the vast amount of missing, was `r nrow(dat_sim)`. The average age of the respondents was `r dem_1_mean` with a standard deviation of `r dem_1_sd`. The participants were 89.8% female, 77.7% white, 10.5% Black, 7.90% Asian, and 3.48% reported as residual. This sample size has some significant bias around sex and race. There answer options for the demographics were very binary and lacking in self-description options. 

## Measures

### Childhood well-being scale
``` {r alpha, include = FALSE}

alpha_cwb <-  psych::alpha(dplyr::select(dat_sim, "cwb_1_sim", "cwb_2_sim_r", "cwb_3_sim_r", "cwb_4_sim"))

# pull out just the alpha and save as object to insert into text

alpha_cwb <- alpha_cwb$total$std.alpha
alpha_cwb

```
The childhood well-being scale was created using select objects from the SIPP section on child well-being. For this report there were only four true or false questions used to create the cwb_scale which stands for the childhood well-being scale. This was also reported data from the parents about children at a variety of ages. The Cronbach's alpha for this scale was `r alpha_cwb`. This is a very low alpha, probably due to the few number of items and the randomness in selection of the items. 

### Residential Stability
The residential stability measures are two questions from the residential section of the SIPP questionnaire. The questions ask about reason for moving and also if they were renting, owned, or were occupying without payment. 


## Material

## Procedure

## Data analysis
We used `r cite_r("r-references.bib")` for all our analyses.

# Results
```{r descriptive table and plots, echo=FALSE}
cwb_table <- dplyr::tribble(
    ~Item, ~Mean, ~SD,
    "CWB Item 1", cwb_1_mean,  cwb_1_sd,
    "CWB Item 2", cwb_2_r_mean,  cwb_2_r_sd,
    "CWB Item 3", cwb_3_r_mean,  cwb_3_r_sd,
    "CWB Item 4", cwb_4_mean,  cwb_4_sd)

apa_table(cwb_table, 
             caption = "Descriptivse for Childhood Wellbeing Scale Items",
             align = "l", digits = 2,
          note = "True or false questions keyed 1 as postive and 2 as negative")

ggplot(dat_sim, aes(x = cwb_1_sim)) + geom_histogram(binwidth = 0.75) +
  theme_apa()
```

```{r p-value and effect size, include = FALSE}
# t.test(x = cwb_scale_mean, y = res_1_sim_mean,
      # alternative = c("two.sided"),
      # mu = 6691, paired = TRUE, var.equal = FALSE,
      # conf.level = 0.95)

t_test <- t.test(dat_sim$res_1_sim, dat_sim$cwb_scale_sim, paired = FALSE, alternative = "two.sided", var.equal = TRUE)


```
The p-value when comparing residential stability marker 1 and the cwb_scale was very small, `r t_test`. 
\newpage

# References

::: {#refs custom-style="Bibliography"}
:::
